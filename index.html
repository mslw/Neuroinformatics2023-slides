<!doctype html>
<html lang="en">
<head>
  <title> datalad @ OSF2023NL </title>
  <meta name="description" content=" osfnl-2023-datalad ">
  <meta name="author" content=" Stephan Heunis ">

  <meta charset="utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/dist/reset.css">
  <link rel="stylesheet" href="reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="reveal.js/dist/theme/beige.css">
  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="reveal.js/plugin/highlight/monokai.css">
  <link rel="stylesheet" href="custom_styles.css">
</head>
<body>

<div class="reveal">
<div class="slides">

<!-- FRONT PAGE -->
<section>
    <h2 style="margin-bottom: 0;">Dutch Open Science Festival 2023</h2>
    <img src="pics/datalad_git.svg" style="height:300px; margin-bottom: 0; padding-bottom: 0;" alt="title image">
    <div style="margin-top:0.5em;">
        <table style="border: none;">
            <tr>
                <td>Stephan Heunis<br>
                    <small>
                        <a href="https://mas.to/@jsheunis" target="_blank">
                        <img data-src="pics/mastodon.svg" style="height:30px;margin:0px" />
                        @jsheunis
                        </a>
                    </small>
                    <small>
                        <a href="https://github.com/jsheunis" target="_blank">
                        <img data-src="pics/GitHub.png" style="height:30px;margin:0px" />
                        jsheunis
                        </a>
                    </small>
                    <br>
                    <small>
                        <a href="https://fosstodon.org/@datalad" target="_blank">
                        <img data-src="pics/mastodon.svg" style="height:30px;margin:0px" />
                        @datalad
                        </a>
                    </small>
                    <small>
                        <a href="https://github.com/datalad" target="_blank">
                        <img data-src="pics/GitHub.png" style="height:30px;margin:0px" />
                        datalad
                        </a>
                    </small>
                </td>
                <td style="text-align: center;">
                    <img style="height:80px;margin-right:1px;margin-bottom:5px;margin-top: 1em; vertical-align:middle;" data-src="pics/fzj_logo.svg" /><br>
                    <img style="height:80px;margin-right:1px;margin-bottom:5px;margin-top: 0; vertical-align:middle;" data-src="pics/SYNClab_logo.png" />
                </td>
            </tr>
        </table>
    </div>
    <p style="text-align: center;">
        <small><a href="http://psychoinformatics.de" target="_blank">Psychoinformatics lab</a>,
            Institute of Neuroscience and Medicine, Brain &amp; Behavior (INM-7)<br>Research Center Jülich, Germany
            <br>
        </small>
        <small>
            <a href="https://erasmus-synclab.nl/" target="_blank">SYNC lab</a>,
            Department of Psychology, Education and Child Studies
            <br>Erasmus School of Social and Behavioral Sciences, EUR, The Netherlands
            <br>
        </small>
    </p>
    <div>
        <small>Slides:&nbsp;</small>
        <br><a href="https://jsheunis.github.io/osfestival-nl-datalad">jsheunis.github.io/osfestival-nl-datalad</a>
    </div>
</section>

<section>
    <h2>Agenda</h2>
    <br>
    <p style="margin-left: 3em; text-align: left;">
        14h00:&nbsp;&nbsp;&nbsp;An overview of DataLad (<em>30 min</em>) <br>
        14h30:&nbsp;&nbsp;&nbsp;Code-along demo: DataLad basics (<em>15 min</em>) <br>
        <em>14h45:&nbsp;&nbsp;&nbsp;break (<em>10 min</em>)</em> <br>
        14h55:&nbsp;&nbsp;&nbsp;Code-along demo: DataLad basics (<em>10 min</em>) <br>
        15h10:&nbsp;&nbsp;&nbsp;Code-along demo: publishing datasets (<em>30 min</em>)<br>
    </p>
</section>

<section>
    <h2>Acknowledgements</h2>
    <table>
    <tr style="vertical-align:middle">
      <td style="vertical-align:middle">
        <dl style="margin-bottom:20px">
          <dt style="margin-top:20px">DataLad software <br>
              &amp; ecosystem</dt>
          <dd style="margin-left:5px!important">
            <ul style="margin-left:5px!important">
                <li>Psychoinformatics Lab, <br>
                Research center Jülich</li>
                <li>Center for Open <br>
                Neuroscience, <br>
                Dartmouth College</li>
                <li>Joey Hess (git-annex)</li>
                <li><em>>100 additional contributors</em></li>
            </ul>
          </dd>
        </dl>
      </td>
      <td style="vertical-align:middle">
    <div style="margin-top:-20px;margin-bottom:-20px;text-align:center"><strong>Funders</strong></div>
    <div style="margin-top:-20px">
    <img style="height:150px;margin-right:0px" data-src="pics/nsf.png" />
    <img style="height:150px;margin-right:0px;margin-left:40px" data-src="pics/binc.png" />
    <img style="height:150px;margin-left:0px" data-src="pics/bmbf_datalad.png" />
    </div>
    <div style="margin-top:-20px">
    <img style="height:80px;margin-top:0px;margin-left:30px" data-src="pics/fzj_logo.svg" />
    <img style="height:60px;margin-left:50px;margin-bottom:25px" data-src="pics/dfg_logo_englisch_blau_en.png" />
    </div>
    <div style="margin-top:-20px">
    <img style="height:100px" data-src="pics/erc_logo.png" />
    <img style="height:60px;margin-bottom:35px" data-src="pics/erdf.png" />
    </div>
    <div style="margin-top:-20px">
    <img style="height:80px;margin-right:20px;margin-bottom:5px" data-src="pics/nrw_mkw_logo.png" />
    <img style="height:60px;margin-right:20px" data-src="pics/cbbs_logo.png" />
    <img style="height:60px" data-src="pics/LSA-Logo.png" />
    </div>
    </td>
    </tr>
    <tr>
    <td colspan=2 width="100%">
    <div style="margin-top:0px">
    <div style="margin-top:20px;margin-bottom:-50px"><strong>Collaborators</strong></div>
    <img style="height:100px;margin:0px;margin-left:100px" data-src="pics/cbrain_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/hbp_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/conp_logo.png" />
    <img style="height:120px;margin:10px" data-src="pics/openneuro_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/ebrain-health-logo.png"/>
    <img style="height:100px;margin:20px" data-src="pics/GIN_logo.png" />
    </div>
    <div style="margin-top:-20px;text-align:center">
    <img style="height:120px;margin:20px" data-src="pics/sfb1451_logo.png" />
    <img style="height:140px;margin:10px" data-src="pics/brainlife_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/vbc_logo.png" />
    </div>
    </td>
    </tr>
    </table>
</section>


<section>
    <h2><code>1</code></h2>
    <h2><code>An overview of DataLad</code></h2>
</section>


<section>
    <h2>What is a DataLad?</h2>

    <br>
    <ul>
        <li class="fragment">A free and open source tool</li>
        <li class="fragment">for decentralized (research) data management</li>
        <li class="fragment">with a command line interface, Python API, and graphical user interface</li>
        <li class="fragment">allowing exhaustive tracking of the evolution of digital objects</li>
        <li class="fragment">and computational provenance tracking</li>
        <li class="fragment">to enhance modularity, portability and reproducibility.</li>
    </ul>
    <br>
    <br>
    <div class="fragment">

    <a href="http://datalad.org"><img style="height:300px" data-src="pics/datalad_logo_wide.svg" /></a>
    <br>

    Let's explore this...</div>
    
</section>


<section>
    <section>
      <h2>Everything is to be made FAIR</h2>
      <ul style="list-style-type:none">
        <li><h1 style="display:inline">F</h1>indable</li>
        <li><h1 style="display:inline">A</h1>ccessible</li>
        <li><h1 style="display:inline">I</h1>nteroperable</li>
        <li><h1 style="display:inline">R</h1>eusable</li>
      </ul>
      <br>
      <note><small><a href="https://www.go-fair.org/fair-principles">https://www.go-fair.org/fair-principles</a></small></note>
      <note><small>Wilkinson et al. The FAIR Guiding Principles for scientific data management
        and stewardship. Sci Data 3, 160018 (2016). https://doi.org/10.1038/sdata.2016.18</small></note>
      <aside class="notes">
          since 2016 (five years), no way around it, declared "done"
      </aside>
    </section>
    
    <section>
      <h2>But the "I" in FAIR is not you</h2>
      <ul style="list-style-type:none">
        <li><h1 style="display:inline">F?</h1> I already have it, it's right here!</li>
        <li><h1 style="display:inline">A?</h1> I am working with it already, I made it!</li>
        <li><h1 style="display:inline">I?</h1> With what?</li>
        <li><h1 style="display:inline">R?</h1> First let me finish this PhD and then we talk, OK?</li>
      </ul>
      <aside class="notes">
          individual/limited perspective less clear, tendency to delay and make expensive
      </aside>
    
      <p style="margin-top:50px"><strong>Still, someone has to put in the work or nothing will ever be FAIR.</strong></p>
    </section>
    
    <section data-markdown><script type="text/template">
    ## VAMP it up!
    ![](pics/Vamp-The_Rich_Dont_Rock.jpg)<!-- .element: height="800px" -->

    <small><imgcredit>Divebomb Records</imgcredit></small>
    
    Note:
    My proposal: Let's think about VAMP instead
    </script></section>
    
    <section>
      <h2>Be FAIR and immediately benefit from it <em>yourself</em>...</h2>
      <ul style="list-style-type:none">
        <li><h1 style="display:inline">V</h1>ersion-controlled</li>
        <li><h1 style="display:inline">A</h1>ctionable metadata</li>
        <li><h1 style="display:inline">M</h1>odular</li>
        <li><h1 style="display:inline">P</h1>ortable</li>
      </ul>
      <aside class="notes">
          not the band, but...
      </aside>
    </section>

    <section data-markdown><script type="text/template">
    ## ...while still working towards <em>the greater good</em> of FAIR data
        
        - Bench/bed/field-side researchers are an essential source of<br> *valid* metadata, critical for FAIR data
        
        - Their **resources are limited**, and they need something in exchange
        
        - Focus on **enabling practical collaboration**<br> (even if just with one's future self)<br>
      
    ### Make the aspirational goal "FAIR data" <br>a by-product of enabling efficient research
        
    </script></section>
    
    <section data-markdown><script type="text/template">
    ![](pics/datalad_logo_wide.svg)<!-- .element: height="600" -->
    http://datalad.org<!-- .element: style="margin-left:800px" -->
    <br><br><br>
    ### So what does the DataLad approach involve?
    </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Exhaustive tracking of research components
    ![](pics/vamp_0_start.png)<!-- .element: width="100%" -->
    Well-structured datasets (using community standards), and portable computational environments &mdash; and their evolution &mdash; are the precondition for reproducibility
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # turn any directory into a dataset`
    # with version control
    
    % datalad create &lt;directory&gt;
    </pre></code>
    </td><td style="padding:0px">
    <code><pre>
    # save a new state of a dataset with
    # file content of any size
    
    % datalad save
    </pre></code>
    </td></tr></table>
    Note:
    - link to prev. statements on description standards
    - your community could be really small (your lab), when data are precious resources
    will be spent to understand it, but information must be capture to make this possible
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## What is a DataLad dataset?

    - a regular, but *managed* directory on computer file system
      <small>think: provides the familiar look and feel of files and folders</small>
    
    - **metadata** on the evolution of a collection of files:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> content identity <em>(think: checksums)</em><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> content availability <em>(think: URLs)</em><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> provenance of change <em>(think: who did what when?)</em>
    
    - a **Git** repository <br>
      <small>think: compatible with anything that can handle Git repositories</small>
    
    - employs **git-annex** for file content tracking and transport
      <small>think: supports any storage service and transport protocol supported by git-annex</small>
    
    - extends both Git and git-annex with additional features and infrastructure support <br>
      <small>think: deposit and retrieve from non-Git-aware sites</small>
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## Talk is cheap, show me the code: Git vs. DataLad
    
    <iframe width="1120" height="630" src="https://www.youtube-nocookie.com/embed/Yrg6DgOcbPE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    https://www.youtube.com/watch?v=Yrg6DgOcbPE
    
    <aside class="notes">
    - show git limits: commit a change in a 3rd-level submodule
    - show annex limits: get file in a subdataset
    - reveal: datalad makes repo-boundaries vanish -- show save -r
    </aside>
    </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Capture computational provenance
    ![](pics/vamp_1_provcapture.png)<!-- .element: width="100%" -->
    Which data was needed at which version, as input into which code, running with what parameterization in which
    computional environment, to generate an outcome?
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # execute any command and capture its output
    # while recording all input versions too
    
    % datalad run --input ... --output ... &lt;command&gt;
    </pre></code>
    </td></tr></table>
    
    Note:
    The missing link: even when everything is shared, we still don't know how to start.
    README is minimum, but executable prov-records are much better.
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## Data descriptor &larr; actionable provenance
    ![](pics/w3cprov.png)<!-- .element: width="80%" -->
    
    <note>https://www.w3.org/TR/prov-overview</note>
    Note:
    - description standard often miss out on provenance
    - Mostly about "what is it?"
    - We also need "how it came to be?" (faiR actually demands it)
    - shown: W3C-PROV, but we are not there yet
    
    take a step back, look at what provenance requires and provides
    </script></section>
    
    <section data-markdown><script type="text/template">
    ![](pics/fairlybig_paper.png)<!-- .element: width="100%" -->
    https://www.nature.com/articles/s41597-022-01163-2
    </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Exhaustive capture enables portability
    ![](pics/vamp_2_pushtocloud.png)<!-- .element: width="100%" -->
    Precise identification of data and computational environments, combined with provenance records form a comprehensive and portable data structure, capturing all aspects of an investigation.
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # transfer data and metadata to other sites and services
    # with fine-grained access control for dataset components
    
    % datalad push --to &lt;site-or-service&gt;
    </pre></code>
    </td></tr></table>
    
    Note:
    Does it fly? Can you give it to someone? Or can you take it with you to your new lab?
    </script></section>
    
    <section data-markdown data-transition="fade"><script type="text/template">
    ## (Meta)data deposition (on Dataverses)
    ![](pics/dataverse_demo_deposit.png)<!-- .element: width="70%" style="margin-top:-30px;margin-bottom:-20px;z-index: -1"-->
    
    - Register any dataset at any Dataverse site (e.g., DataverseNL), receive citable DOI
    - No requirement to re-host data (avoids duplication of storage cost)
    - Data owner remains in full control over data access
    - https://github.com/datalad/datalad-dataverse
    </script></section>
    
    
    <section data-transition="fade">
    <h2>EUDAT B2DROP: data deposition and retrieval</h2>
    <video controls data-autoplay src="pics/webdav_roundtrip.mp4"></video>
    Similar support for Surfdrive, Dataverse, Open Science Framework, S3, ...
    </section>

    <section data-markdown><script type="text/template">
        ## Remote analysis of clinical data
        ![](pics/datalad_hospital.png)
        </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Reproducibility strengthens trust
    ![](pics/vamp_3_reproduce.png)<!-- .element: width="100%" -->
    Outcomes of computational transformations can be validated by authorized 3rd-parties. This enables audits, promotes accountability, and streamlines automated "upgrades" of outputs
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # obtain dataset (initially only identity,
    # availability, and provenance metadata)
    
    % datalad clone &lt;url&gt;
    </pre></code>
    </td><td style="padding:0px">
    <code><pre>
    # immediately actionable provenance records
    # full abstraction of input data retrieval
    
    % datalad rerun &lt;commit|tag|range&gt;
    </pre></code>
    </td></tr></table>
    Note:
    Goal is automated reproducibility, enables assessment of robustness and benchmarking algorithmic developments
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## When everything is tracked: A reproducible paper
    
    <iframe width="1120" height="630" src="https://www.youtube-nocookie.com/embed/nhLqmF58SLQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    - Peer-reviewed paper published in Behavior Research Methods [[DOI 10.3758/s13428-020-01428-x](https://doi.org/10.3758/s13428-020-01428-x)]<!-- .element: style="font-size:70%" -->
    
    - Free to reproduce at https://github.com/psychoinformatics-de/paper-remodnav more details in the DataLad handbook
      http://handbook.datalad.org/r.html?reproducible-paper.
    
    - Full video: https://youtube.com/datalad
    
    <!-- .element: style="font-size:70%" -->
    Note:
    - VERY useful prior publication
    </script></section>

    <section data-markdown><script type="text/template">
        ### Ultimate goal: (re-)usability
        ![](pics/vamp_4_reuse.png)<!-- .element: width="100%" -->
        Verifiable, portable, self-contained data structures that track all aspects of an investigation exhaustively can be (re-)used as modular components in larger contexts &mdash; propagating their traits
        
        <table width=100% style="padding:0px">
        <tr><td style="padding:0px">
        <code><pre>
        # declare a dependency on another dataset and
        # re-use it a particular state in a new context
        
        % datalad clone -d &lt;superdataset&gt; &lt;url&gt; &lt;path-in-dataset&gt;
        </pre></code>
        </td></tr></table>
        
        Note:
        With these in place, re-usability is a small(er) step
        </script></section>
</section>
    

    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    ## Why is DataLad a terminal app?
    ![](videos/typing_monkey.gif)<!-- .element: width="49%" style="margin-bottom:170px" -->
    ![](videos/mouse_pointers.webp)<!-- .element: width="49%" -->
    
    No reproducibility without precise instructions
    </script></section>
    
    
    <section
        data-background-video="videos/gooey_historytab.mp4"
        data-background-video-loop
        data-background-size="contain">
    <p style="padding-top:800px;text-shadow: 2px 2px 2px white;">
    DataLad Gooey: Convenience for exploration and management
    </p>
    </section>
    
    <section
        data-background-video="videos/gooey_run_in_terminal.mp4"
        data-background-video-loop
        data-background-size="contain">
    <p style="padding-top:800px;text-shadow: 2px 2px 2px white;">
    Companion (not competition) for the terminal
    </p>
    </section>
    
    <section
        data-background-video="videos/gooey_add_metadata.mp4"
        data-background-video-loop
        data-background-size="contain">
    <p style="padding-top:800px;text-shadow: 2px 2px 2px white;">
    Metadata entry convenience
    </p>
    </section>
    </section>
    
    <section>
    <section data-markdown><script type="text/template">
    ## Not feature-complete for you? Extend!
    
    https://github.com/datalad/datalad-extension-template
    
    <small>
    
    | `datalad-` | |
    | --- | --- |
    | `catalog` | Render a web-accessible catalog from DataLad dataset metadata |
    | `container` | working with containerized environments |
    | `crawler` | crawl web resources into an automated data distribution |
    | `dataverse` | deposit at and retrieve datasets from Dataverse sites |
    | `debian` | track Debian software package build and deployment reproducibly |
    | `ebrains` | retrieve any EBRAINs hosted dataset as a DataLad dataset |
    | `fuse` | mount DataLad datasets as a FUSE file system |
    | `gooey` | extensible DataLad GUI |
    | `metalad` | (semantic) metadata transport and reporting |
    | `neuroimaging` | workflow and data format support for neuro/medical imaging |
    | `next` | staging areas for new features |
    | `osf` | deposit at and retrieve datasets from the Open Science Framework (OSF) |
    | `ukbiobank` | Version-controlled access to the UKB dataset |
    | `xnat` | retrieve MRI data from XNAT databases as DataLad datasets |
    | ... | various 3rd-party extensions are also available (e.g., `getexec`, `lgpdextension`) |
    
    </small>
    </script></section>
    </small>
    
    <section data-markdown><script type="text/template">
    ## DataLad catalog extension
    ![](pics/datalad_catalog.png)<!-- .element: width="100%" style="margin-top:-20px" -->
    
    zero-cost reporting, presentation, collaboration
    </script></section>
    </section>
    
    
    <section>
    <section data-markdown><script type="text/template">
    ## Data-centered, interoperable digital ecosystem
    
    ![](pics/decentralized_rdm.png)<!-- .element: width="100%" -->
    
    <note>Hanke, Pestilli, Wagner, Markiewicz, Poline & Halchenko (2021). In defense of decentralized research data
    management. Neuroforum, 72, 17-25.</note>
    
    Note:
    - Freedom of infrastructure selection
    - Transitions between institutions and stewards
    - Facilitate diverse collaboration
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## Open science education
    ![](pics/adina.jpg)<!-- .element: class="ackimg" -->
    ![](pics/handbook_frontpage.png)<!-- .element: width="900" style="margin-top:-20px;margin-bottom:-10px" -->
    
    http://handbook.datalad.org
    
    - **educational materials** on technologies &mdash; **targeting users**, not developers (executable paper, student surpervisor workflow,
      ...)
    - handbook with 600+ pages on concepts, workflows, and use cases (led by Adina Wagner)
    
    Note:
    RDM Education is key. Handbook helps people be more productive, yielding more FAIR resources as an outcome, but not as the main goal.
    </script></section>
    
    
    
    <section>
      <h2>DataLad contact and more information</h2>
      <table>
      <tr><td>Website + Demos</td>
      <td><a href="http://datalad.org">http://datalad.org</a></td>
      </tr><tr><td>Documentation</td>
      <td><a href="http://handbook.datalad.org">http://handbook.datalad.org</a></td>
      </tr><tr><td>Talks and tutorials</td>
      <td><a href="https://youtube.com/datalad">https://youtube.com/datalad</a></td>
      </tr><tr><td>Development</td>
      <td><a href="http://github.com/datalad">http://github.com/datalad</a></td>
      </tr><tr><td>Support</td>
      <td><a href="https://matrix.to/#/#datalad:matrix.org">https://matrix.to/#/#datalad:matrix.org</a></td>
      </tr><tr><td>Open data</td>
      <td><a href="http://datasets.datalad.org">http://datasets.datalad.org</a></td>
      </tr>
      </tr><tr><td>Mastodon</td>
      <td>@datalad@fosstodon.org</td>
      </tr><tr><td>Twitter</td>
      <td>@datalad</td>
      </table>
      <br>

      <h3>!!Stay tuned!!</h3>

      <a href="https://fosstodon.org/@datalad/110655971931411421">First ever DataLad+git-annex meeting open for all!</a> 
      
    </section>
</section>




<section>
    <section>
        <h2><code>2</code></h2>
        <h2><code>Code-along demonstration</code></h2>
    </section>

    <section>
        <h2>Practical aspects</h2>
        <img width="200" src="pics/jupyter_logo.png" alt="jupyterlogo"><br>
        <ul>
            <li>We'll work in the browser on a cloud server with JupyterHub</li>
            <li class="fragment">Cloud-computing environment:<br>
                &nbsp;&nbsp;&nbsp;- <a href="https://jupyterhub.datalad.nl">jupyterhub.datalad.nl</a>
            </li>
            <li class="fragment">We have pre-installed DataLad and other requirements</li>
            <li class="fragment">We will work via the terminal</li>
            <li class="fragment">Draw a username, and set a password of your choice when logging in for the first time; remember it!</li>
        </ul>
    </section>


    <section style="text-align: left;">
        <h3>Using DataLad in the Terminal</h3>

        Check the installed version:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad --version
            </code>
            <p id="displayArea"></p>
        </pre>

        <div class="fragment">
            For help on using DataLad from the command line:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad --help
                </code>
            </pre>
        </div>

        <div class="fragment">
            For extensive info about the installed package, its dependencies, and extensions, use <code>wtf</code>:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad wtf
                </code>
            </pre>
        </div>
    </section>


    <section style="text-align: left;">
        <h3>git identity</h3>
        Check git identity:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                git config --get user.name
                git config --get user.email
            </code>
        </pre>

        <div class="fragment">
            Configure git identity:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    git config --global user.name "Stephan Heunis"
                    git config --global user.email "s.heunis@fz-juelich.de"
                </code>
            </pre>
        </div>
    </section>


    <section style="text-align: left;">
        <h3>Using datalad via its Python API</h3>
        Open a Python environment:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                ipython
            </code>
        </pre>
        <div class="fragment">
            Import and start using:
            <pre style="margin-left: 0;">
                <code data-trim class="language-python" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    import datalad.api as dl
                    dl.create(path='mydataset')
                </code>
            </pre>
        </div>
        <div class="fragment">
            Exit the Python environment:
            <pre style="margin-left: 0;">
                <code data-trim class="language-python" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    exit
                </code>
            </pre>
        </div>
    </section>
</section>



<section>
    <section>
        <h2><code>2 Code-along demo</code></h2>
        <h2><code>2.1 Datalad Basics</code></h2>
    </section>
    
    <section>
        <h3 style="text-align: left;">Datalad datasets...</h3>
        <img src="pics/comic_box4.svg" alt="">
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Datalad datasets</h3>
        Create a dataset (here, with the <code>text2git</code> config):
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad create -c text2git bids-data
            </code>
        </pre>
    
        <div class="fragment">
            Let's have a look inside. Navigate using <code>cd</code> (change directory):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    cd bids-data
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            List the directory content, including hidden files, with <code>ls</code>:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    ls -la .
                </code>
            </pre>
        </div>
    </section>
    
    
    <section>
        <h3 style="text-align: left;">Version control...</h3>
        <img src="pics/comic_box5.svg" alt="">
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Version control</h3>
        Let's add some Markdown text to a README file in the dataset
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                echo "# A BIDS structured dataset for my input data" > README.md
            </code>
        </pre>
    
        <div class="fragment">
            Now we can check the <code>status</code> of the dataset:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad status
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            We can save the state with <code>save</code>
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad save -m "Add a short README"
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Further modifications:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    echo "Contains functional task data of one subject" >> README.md
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Save again:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad save -m "Add information on the dataset contents to the README"
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Now, let's check the dataset history:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    git log
                </code>
            </pre>
        </div>
    </section>
    
    
    <section>
        <h3 style="text-align: left;">Data consumption & transport...</h3>
        <img src="pics/comic_box6_consumption.svg" alt="">
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Data consumption & transport...</h3>
    
        Install a dataset from remote URL (or local path) using <code>clone</code>:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd ../
                datalad clone \
                https://github.com/psychoinformatics-de/studyforrest-data-phase2.git
            </code>
        </pre>
        <div class="fragment">
            We can now view the cloned dataset's file tree:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    cd studyforrest-data-phase2
                    ls
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Let's check the dataset size (i.e. git repository):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    du -sh # this will print the size of the directory in human readable sizes
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Let's check the <em>actual</em> dataset size (i.e. git repository + annexed content):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad status --annex
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            The DataLad dataset is just the git repository,
            i.e. the metadata of all files in the dataset,
            including the content of all files comitted to git.
            The actual file content in the annex can be retrieved as needed.
        </div>
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Data consumption & transport</h3>
    
        We can retrieve actual file content with <code>get</code> (here, multiple files):
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                # get all files of sub-01 for all functional runs of the localizer task
                datalad get \
                sub-01/ses-localizer/func/sub-01_ses-localizer_task-objectcategories_run-*.nii.gz
            </code>
        </pre>
    
        <div class="fragment">
            If we don't need a file locally anymore, we can <code>drop</code> it:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    # drop a specific file
                    datalad drop \
                    sub-01/ses-localizer/func/sub-01_ses-localizer_task-objectcategories_run-4_bold.nii.gz
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            And it's no problem if you need that exact file again, just <code>get</code>it:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    # get a specific file
                    datalad drop \
                    sub-01/ses-localizer/func/sub-01_ses-localizer_task-objectcategories_run-4_bold.nii.gz
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Therefore: no need to store all files locally.
            Data just needs to be available from at least one location,
            then you can <code>get</code> what you want when you need it,
            and <code>drop</code> the rest.
        </div>
    </section>
    
    
    <section style="text-align: left;">
        <h3>Dataset nesting...</h3>
    
        Datasets can be nested in superdataset-subdataset hierarchies:
    
        <img src="pics/linkage_subds.png" alt="">
        
        <ul class="fragment">
            <li>Helps with scaling (see e.g. the <a href="https://github.com/datalad-datasets/human-connectome-project-openaccess">Human Connectome Project dataset</a> )</li>
            <li>Version control tools struggle with >100k files</li>
            <li>Modular units improves intuitive structure and reuse potential</li>
            <li>Versioned linkage of inputs for reproducibility</li>
        </ul>
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Dataset nesting</h3>
    
        Let's make a nest! First we navigate into the top-level dataset:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd ../bids-data
            </code>
        </pre>
    
        <div class="fragment">
            Then we clone the input dataset into a specific location in the file tree of the existing dataset, making it a <em>sub</em>dataset (using the <code>-d/--dataset</code> flag):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad clone --dataset . \
                    https://github.com/datalad/example-dicom-functional.git  \
                    inputs/rawdata
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Similarly, we can clone the analysis container (actually, a set of containers from <a href="https://www.repronim.org/">ReproNim</a>) as a subdataset:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad clone -d . \
                    https://github.com/ReproNim/containers.git \
                    code/containers
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            Let's see what changed in the dataset, using the <code>subdatasets</code> command:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad subdatasets
                </code>
            </pre>
        </div>
    </section>
    
    
    <section>
        <h3 style="text-align: left;">Computationally reproducible execution...</h3>
        <img src="pics/comic_box7.svg" width="65%" alt="">
        <ul>
            <li class="fragment fade-in-then-semi-out">which script/pipeline version</li>
            <li class="fragment fade-in-then-semi-out">was run on which version of the data</li>
            <li class="fragment fade-in-then-semi-out">to produce which version of the results?</li>
        </ul>
    </section>
    
    <section style="text-align: left;">
        <h3>...Computationally reproducible execution...</h3>
    
        <ul>
            <li class="fragment fade-in-then-semi-out">The <code>datalad run</code> can run any command in a way that links the command or script to the results it produces and the data it was computed from</li>
            <li class="fragment fade-in-then-semi-out">The <code>datalad rerun</code> can take this recorded provenance and recompute the command</li>
            <li class="fragment fade-in-then-semi-out">The <code>datalad containers-run</code> (from the extension) can capture software provenance in the form of software containers in addition to the provenance that datalad run captures</li>
        </ul>
        <br><br>
    
        <div class="fragment">
            With the <code>datalad-container</code> extension, we can inspect the list of registered containers (recursively):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad containers-list --recursive
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            We'll use the <code>repronim-reproin</code> container for dicom conversion.
        </div>
    
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Computationally reproducible execution</h3>
    
        Now, let's try out the <code>containers-run</code> command:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad containers-run -m "Convert subject 02 to BIDS" \
                --container-name code/containers/repronim-reproin \
                --input inputs/rawdata/dicoms \
                --output sub-02 \
                "-f reproin -s 02 --bids -l '' --minmeta -o . --files inputs/rawdata/dicoms"
            </code>
        </pre>
        <div class="fragment">
            What changed after the <code>containers-run</code> command has completed?
            <br>
            We can use <code>datalad diff</code> (based on <code>git diff</code>):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad diff -f HEAD~1
                </code>
            </pre>    
        </div>
    
        <div class="fragment">
            We see that some files were added to the dataset!
            <br>
            And we have a complete provenance record as part of the git history:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    git log -n 1
                </code>
            </pre>
        </div>
    </section>
    
    
    <section>
        <h3 style="text-align: left;">Publishing datasets...</h3>
        <div style="margin-top:1em;">
            <table style="border: none;">
                <tr>
                    <td><img style="width: 800px; margin-right:1px;margin-bottom:10px;vertical-align:middle;" data-src="pics/comic_box6_publishing.svg" /></td>
                    <td><img style="width: 1000px; margin-right:1px;margin-bottom:10px;vertical-align:middle;" data-src="pics/comic_box9.svg" /></td>
                </tr>
            </table>
        </div>
        <br>
        <div class="fragment">For example: (see next section)
            <br>
            <ol>
                <li>OSF</li>
                <li>SURFdrive (webdav)</li>
                <li>Dataverse</li>
                <li>GitHub</li>
            </ol>
        </div>
    </section>
    
    
    <section style="text-align: left;">
        <h3>Using published data...</h3>
    
        Let's use our published data in a new analysis, to demonstrate reusability and the usefulness of modularity.
        <br><br>
        First let's create a new dataset using the <a href="https://handbook.datalad.org/en/latest/basics/101-127-yoda.html#yoda">yoda principles</a>:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd ../
                datalad create -c yoda myanalysis
            </code>
        </pre>
    
        <div class="fragment">
            Then we can clone our GIN-published dataset as a subdataset <br>
            (<strong>NB:</strong> use the browser URL without ".git" suffix):
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    cd myanalysis
                    datalad clone -d . \
                    https://gin.g-node.org/your-gin-username/bids-data \
                    input
                </code>
            </pre>
        </div>
    </section>


    
    
    
    <section style="text-align: left;">
        <h3>...Using published data...</h3>
    
        We have data, and now we need an analysis script.
        We will use DataLad's <code>download-url</code> which gets the content of a script and registers its source:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad download-url -m "Download code for brain masking from Github" \
                -O code/get_brainmask.py \
                https://raw.githubusercontent.com/datalad-handbook/resources/master/get_brainmask.py
            </code>
        </pre>
    
        <div class="fragment">
            Now we have data and an analysis script, and we still need the correct software environment within which the run the analysis.
            We will again use the <code>datalad-container</code> extension to register a container to the new dataset:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad containers-add nilearn \
                    --url shub://adswa/nilearn-container:latest \
                    --call-fmt "singularity exec {img} {cmd}"
                </code>
            </pre>
        </div>
    </section>
    
    
    <section style="text-align: left;">
        <h3>...Using published data</h3>
    
        Finally, we can run the analysis:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad containers-run -m "Compute brain mask" \
                -n nilearn \
                --input input/sub-02/func/sub-02_task-oneback_run-01_bold.nii.gz \
                --output figures/ \
                --output "sub-02*" \
                "python code/get_brainmask.py"
            </code>
        </pre>
    
        <div class="fragment">
            Afterwards, we can inspect how specific files came to be, e.g.:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    git log sub-02_brain-mask.nii.gz
                </code>
            </pre>
        </div>
    
        <div class="fragment">
            And since the run-record is part of the dataset's git history, we know the provenance.
            DataLad can use this machine-readable information to <em>rerun</em> the analysis without you having to specify any information again:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad rerun
                </code>
            </pre>
        </div>
    </section>
</section>





<!-- PUBLISHING: CODE ALONG -->

<section>
    <h2><code>2 Code-along demo</code></h2>
    <h2><code>2.2 Publishing data</code></h2>

    <br>
    <ol>
        <li>OSF</li>
        <li>SURFdrive (webdav)</li>
        <li>Dataverse</li>
        <li>GitHub</li>
    </ol>
</section>

<section>


<section>
    <h2><code>Publishing to OSF</code></h2>
    <p><a href="https://osf.io/">https://osf.io/</a></p>
    <img src="pics/git-annex-osf-logo.png" alt="datalad-osf-logo" width="50%">
</section>

<section style="text-align: left;">
    <div style="display: flex !important; align-items: center">
        <h2>create-sibling-osf</h2>&nbsp;<a href="https://docs.datalad.org/projects/osf/en/latest/">(docs)</a>
    </div>
    
    <ol>
        <li class="fragment">Log into OSF</li>
        <li class="fragment">Create personal access token</li>
        <li class="fragment">Enter credentials using <code>datalad osf-credentials</code>:</li>
    </ol>
    <div class="fragment">
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad osf-credentials
            </code>
        </pre>
    </div>
    <div class="fragment">
        4. Create the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad create-sibling-osf -d . -s my-osf-sibling \
                --title 'my-osf-project-title' --mode export --public
            </code>
        </pre>
    </div>
    <div class="fragment">
        5. Push to the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad push -d . --to my-osf-sibling
            </code>
        </pre>
    </div>
    <div class="fragment">
        6. Clone from the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd ..
                datalad clone osf://my-osf-project-id my-osf-clone
            </code>
        </pre>
    </div>
</section>
</section>


<section>
<section>
    <h2><code>Publishing to SURFdrive</code></h2>
    <small><a href="https://www.surf.nl/en/surfdrive-store-and-share-your-files-securely-in-the-cloud">https://www.surf.nl/en/surfdrive-store-and-share-your-files-securely-in-the-cloud</a></small>

    <br><br>

    <img src="pics/surfdrive_logo.png" alt="surfdrive-logo" width="70%">
</section>

<section style="text-align: left;">
    <div style="display: flex !important; align-items: center">
        <h2>create-sibling-webdav</h2>&nbsp;<a href="https://docs.datalad.org/projects/next/en/latest/generated/man/datalad-create-sibling-webdav.html">(docs)</a>
    </div>

    <ol>
        <li class="fragment">Log into SURFdrive</li>

        <li class="fragment">Create a new folder, e.g., <code>datalad-test</code></li>
        <li class="fragment">Copy your WebDAV URL and add the folder name at the end:
            Menu &gt; Files &gt; Settings &gt; WebDAV <br>
            <small>E.g.: <code>https://surfdrive.surf.nl/files/remote.php/nonshib-webdav/datalad-test</code></small>
        </li>
        <li class="fragment">Create the sibling:</li>
    </ol>
    <div class="fragment">
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd midterm_project
                datalad create-sibling-webdav \
                -d . \
                -r \
                -s my-webdav-sibling \
                --mode filetree 'my-webdav-url'
            </code>
        </pre>
        At this point, DataLad should ask for credentials if you have not entered them before. Enter your Sciebo username and password.
    </div>
    <div class="fragment">
        4. Push to the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad push -d . --recursive --to my-webdav-sibling
            </code>
        </pre>
    </div>
    <div class="fragment">
        5. Clone from the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd ..
                datalad clone 'datalad-annex::?type=webdav&encryption=none\
                &exporttree=yes&url=my-webdav-url/dataset-name' my-webdav-clone
            </code>
        </pre>
    </div>
</section>
</section>



<section>
<section>
    <h2><code>Publishing to Dataverse</code></h2>
    <p><a href="https://dataverse.org/">https://dataverse.org/</a></p>
    <table>
        <tr>
            <td style="width: 50%;"><img src="pics/dataverse_r_project.png" alt=""></td>
            <td><img src="pics/dataladdataverse.png" alt="dataladdataverse-logo"></td>
        </tr>
    </table>
</section>

<section style="text-align: left;">
    <div style="display: flex !important; align-items: center">
        <h2>add-sibling-dataverse</h2>&nbsp;<a href="https://docs.datalad.org/projects/dataverse/en/latest/">(docs)</a>
    </div>
    <ol>
        <li class="fragment">Create an account and log into demo.dataverse.org (or your instance)</li>
        <li class="fragment">Find your API token (Username > API Token)</li>
        <li class="fragment">Create a new Dataverse dataset</li>
        <li class="fragment">Add required metadata and save dataset</li>
        <li class="fragment">Retieve dataset DOI and the Dataverse instance URL</li>
        <li class="fragment">Create the sibling:</li>
    </ol>
    <div class="fragment">
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd midterm_project
                datalad add-sibling-dataverse -d . -s my-dataverse-sibling \
                'my-dataverse-instance-url' doi:'my-dataset-doi'
            </code>
        </pre>
        <em>for example:</em>
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad add-sibling-dataverse -d . -s dataverse \
                https://demo.dataverse.org  doi:10.70122/FK2/3K9FOD
            </code>
        </pre>
        <em>(DataLad asks for credentials (token) if you haven't entered them before)</em>
    </div>
    <div class="fragment">
        7. Push to the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad push -d . --to my-dataverse-sibling
            </code>
        </pre>
    </div>
    <div class="fragment">
        8. Clone from the sibling:
        <pre style="margin-left: 0;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd ..
                datalad clone 'datalad-annex::?type=external&externaltype=dataverse\
                &encryption=none&exporttree=no&url=my-dataverse-instance-url\
                &doi='my-dataset-doi' my-sciebo-clone
            </code>
        </pre>
    </div>
</section>
</section>







<section>
<section>
    <h2><code>Extras</code></h2>
</section>

<section>

    <section>
        <h2>Our dataset: Midterm YODA Data Analysis Project</h2>
    </section>

    <section style="text-align: left;">
        <h2>Our dataset: Midterm YODA Data Analysis Project</h2>
        <ul style="font-size: xx-large">
            <li>DataLad dataset: <a href="https://github.com/datalad-handbook/midterm_project">https://github.com/datalad-handbook/midterm_project</a></li>
            <li>Find out more: <a href="https://handbook.datalad.org/en/latest/basics/101-126-intro.html">A Data Analysis Project with DataLad</a></li>
            <li>All inputs (i.e. building blocks from other sources) are located in the <code>input/</code> subdataset</li>
            <li>Custom code is located in <code>code/</code></li>
            <li>Relevant software is included as a software container</li>
            <li>Outcomes are generated with a provenance tracked run command, and located in the root of the dataset:</li>
            <ul>
                <li><code>prediction_report.csv</code> contains the main classification metrics</li>
                <li><code>output/pairwise_relationships.png</code> is a plot of the relations between features.</li>
            </ul>
        </ul>
        <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                [DS~0] ~/midterm_project
                ├── CHANGELOG.md
                ├── README.md
                ├── code/
                │   ├── README.md
                │   └── script.py
                ├── [DS~1] input/
                │   └── iris.csv -> .git/annex/objects/...
                ├── pairwise_relationships.png -> .git/annex/objects/...
                └── prediction_report.csv -> .git/annex/objects/...
            </code>
        </pre>
    </section>

    <section style="text-align: left; font-size:30px">
        <h2>Our dataset: Midterm YODA Data Analysis Project</h2>
        <li>Let's explore the dataset briefly</li>

        <div class="fragment">
        Install the dataset:
            <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad clone \
                https://github.com/datalad-handbook/midterm_project.git
            </code>
            </pre>
        </div> <div class="fragment">
        Find out about its subdatasets
            <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                cd midterm_project
                datalad subdatasets
            </code>
            </pre>
        </div> <div class="fragment">
        Get some contents
            <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad get input
            </code>
            </pre>
        </div> <div class="fragment">
        Drop some contents
            <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad drop input
            </code>
            </pre>
        </div> <div class="fragment">
        Find out about its history
        <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                tig
            </code>
            </pre>
        </div> <div class="fragment">
        Reproduce an analysis
        <pre style="margin-left: 0; margin-top: 2em;">
            <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                datalad rerun HEAD~2
            </code>
            </pre>
    </section>
</section>



<section>
    <section data-markdown><script type="text/template">
    ## FAIRly big: Process the UK Biobank (imaging data)
    ![](pics/biobank_website.png)<!-- .element: height="400" -->
    
    - 76 TB in 43 million files in total
    - 42,715 participants contributed personal health data
    - Strict DUA
    - Custom binary-only downloader
    - Most data records offered as (unversioned) ZIP files
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## Challenges
    
    - Process data such that
      - Results are computationally reproducible (without the original compute infrastructure)
      - There is complete linkage from results to an individual data record dowload
      - It scales with the amount of available compute resources
    
    - Data processing pipeline
      - Compiled MATLAB blob
      - 1h processing time per image, with 41k images to process
      - 1.2 M output files (30 output files per input file)
      - 1.2 TB total size of outputs
    </script></section>
    
    
    <section data-markdown><script type="text/template">
    ## FAIRly big results
    
    <iframe width="1120" height="630" src="https://www.youtube-nocookie.com/embed/UsW6xN2f2jc?start=17" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    - Rendered from provenance records, automatically captured in the output dataset. Full video: https://youtube.com/datalad
    - Two full (re-)computations, programmatically comparable, verifiable, reproducible -- on any system with data access
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## FAIRly big setup
    ![](pics/fairlybig_ukbsetup.png)<!-- .element: width="1200" style="margin-top:-35px;margin-bottom:-30px" -->
    
    - UKB DataLad extension can track the evolution of the complete data release in DataLad datasets
    <!-- .element: style="font-size:80%" -->
    - Full version history
    <!-- .element: style="font-size:80%" -->
    - Native and BIDSified data layout
    <!-- .element: style="font-size:80%" -->
    
    <note>Wagner, Waite, Wierzba, Hoffstaedter, Waite, Poldrack, Eickhoff, Hanke (2021). FAIRly big: A framework for computationally reproducible processing of large-scale data.</note>
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## FAIRly big workflow
    ![](pics/fairlybig_workflow.png)<!-- .element: width="1200" style="margin-top:-35px;margin-bottom:-30px" -->
    - Common data representation in secure environments
    - Content-agnostic persistent (encrypted) storage
    - All computations in freshly bootstrapped emphemeral environments, only using information from a fully self-contained  DataLad dataset
    <note>Wagner et al. (2021). FAIRly big: A framework for computationally reproducible processing of large-scale data.</note>
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## FAIRly big provenance capture
    ![](pics/fairlybig_prov.png)<!-- .element: width="1200" style="margin-top:-35px;margin-bottom:-30px" -->
    
    - Every single pipeline execution is tracked
    - Each execution individually reproducible without HPC access
    <note>Wagner et al. (2021). FAIRly big: A framework for computationally reproducible processing of large-scale data.</note>
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## FAIRly big workflow
    ![](pics/fairlybig_workflow.png)<!-- .element: width="1200" style="margin-top:-35px;margin-bottom:-30px" -->
    - Common data representation in secure environments
    - Content-agnostic persistent (encrypted) storage
    - All computations in freshly bootstrapped emphemeral environments, only using information from a fully self-contained  DataLad dataset
    <note>Wagner et al. (2021). FAIRly big: A framework for computationally reproducible processing of large-scale data.</note>
    </script></section>
    
    <section data-markdown data-transition="none"><script type="text/template">
    ## Ready for repeated re-use
    ![](pics/vamp_4_reuse.png)<!-- .element: width="100%" -->
    Outcome: Actionable metadata record (in the form of a Git repository).
    Orthogonalizes information on content identify and availability from actual data access
    </script></section>
</section>


<section>
    <section>
        <h2><code>2a</code></h2>
        <h2><code>Publishing to GitLab</code></h2>
        <p><a href="https://gitlab.com/">https://gitlab.com/</a></p>
        <img src="pics/gitlab-logo-100.svg" alt="gitlab-logo">
    </section>
    
    <section style="text-align: left;">
        <div style="display: flex !important; align-items: center">
            <h2>create-sibling-gitlab</h2>&nbsp;<a href="https://handbook.datalad.org/en/latest/basics/101-139-hostingservices.html#creating-a-sibling-on-gitlab">(docs)</a>
        </div>
    
        <ol>
            <li class="fragment">Log into GitLab</li>
            <li class="fragment">Create personal access token</li>
            <li class="fragment">Create a top-level group</li>
            <li class="fragment">Create a gitlab config file (replace relevant items)</li>
        </ol>
        <div class="fragment">
            <pre style="margin-left: 0;">
                <code data-noescape data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    cat << EOF > ~/.python-gitlab.cfg
                    [my-site]
                    url = https://gitlab.com/
                    private_token = my-gitlab-token
                    api_version = 4
                    EOF
                </code>
            </pre>
        </div>
        <div class="fragment">
            5. Configure <code>create-sibling-gitlab</code> in the <code>midterm_project</code> dataset:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad configuration set datalad.gitlab-default-site='my-site'
                    datalad configuration set datalad.gitlab-'my-site'-project='my-top-level-group'
                </code>
            </pre>
        </div>
        <div class="fragment">
            6. Create the sibling:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad create-sibling-gitlab -d . --recursive -s 'my-gitlab-sibling'
                </code>
            </pre>
        </div>
        <div class="fragment">
            7. Push to the sibling:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad push -d . --recursive --to 'my-gitlab-sibling'
                </code>
            </pre>
        </div>
    </section>
    </section>


    <section>
        <section>
            <h2><code>How do we publish data?</code></h2>
        </section>
    
      <section data-transition="None">
          <h2>"Share data like source code"</h2>
          <ul style="font-size:30px">
              <li class="fragment fade-in-then-semi-out" data-fragment-index="1">Datasets can be cloned, pushed, and updated from and to <strong>local</strong> and <strong>remote</strong></strong> paths,
                  remote <strong>hosting services</strong>, external <strong>special remotes</strong></li>
          <img class="fragment fade-in" data-fragment-index="1" style="box-shadow: 5px 5px 3px #888888"  height="330" src="pics/collaboration.svg">
              <li class="fragment fade-in">Examples: <br>
              Local path <pre><code>../my-projects/experiment_data</code></pre>
              Remote path <pre><code>myuser@myinstitutes.hcp.system:/home/myuser/my-projects/experiment_data</code></pre>
              Hosting service <pre><code>git.github.com:myuser/experiment_data.git</code></pre>
              External special remotes <pre><code>osf://my-osf-project-id</code></pre></li>
          </ul>
      <aside class="notes">
      Idea behind datalad: Enable a similar level of tooling and culture for the distribution and version control of data as it is present for open source software development
      </aside>
      </section>
    
    
      <section data-transition="None">
          <h2>Interoperability</h2>
          <ul style="font-size:30px">
              <li>DataLad is built to maximize interoperability and use with hosting and
                  storage technology</li>
              </ul>
          <img src="pics/services_only.png" height="650">
                <small>See the chapter <a href="http://handbook.datalad.org/en/latest/basics/basics-thirdparty.html" target="_blank">
              Third party infrastructure</a> for walk-throughs for different services</small>
      </section>
    
      <section data-transition="None">
          <h2>Interoperability</h2>
          <ul style="font-size:30px">
              <li>DataLad is built to maximize interoperability and use with hosting and
                  storage technology</li>
          </ul>
          <img src="pics/services_connected.png" height="650">
          <small>See the chapter <a href="http://handbook.datalad.org/en/latest/basics/basics-thirdparty.html" target="_blank">
              Third party infrastructure</a> for walk-throughs for different services</small>
      </section>
    
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
          I have a dataset on my computer. How can I share it, or collaborate on it?
          <img height="900" src="pics/startingpoint.svg">
      </section>
    
      <section data-transition="None">
          <h2>Glossary</h2>
          <dl style="font-size:30px">
              <dt class="fragment fade-in" data-fragment-index="1">
                  Sibling (remote)</dt>
              <dd class="fragment fade-in" data-fragment-index="1">
                  Linked clones of a dataset. You can usually update (from) siblings to keep all your siblings in sync
                  (e.g., ongoing data acquisition stored on experiment compute and backed up on cluster and external hard-drive)
              </dd>
              <dt class="fragment fade-in" data-fragment-index="2">
                  Repository hosting service</dt>
              <dd class="fragment fade-in" data-fragment-index="2">
                  Webservices to host Git repositories, such as GitHub, GitLab, Bitbucket, Gin, ...</dd>
              <dt class="fragment fade-in" data-fragment-index="3">
                  Third-party storage</dt>
              <dd class="fragment fade-in" data-fragment-index="3">
                  Infrastructure (private/commercial/free/...) that can host data. A "special remote" protocol
                  is used to publish or pull data to and from it
              </dd>
              <dt class="fragment fade-in" data-fragment-index="4">
                  Publishing datasets</dt>
              <dd class="fragment fade-in" data-fragment-index="4">
                  <em>Pushing</em> dataset contents (Git and/or annex) to a sibling using <strong>datalad push</strong></dd>
              <dt class="fragment fade-in" data-fragment-index="5">
                  Updating datasets</dt>
              <dd class="fragment fade-in" data-fragment-index="5">
                  <em>Pulling</em> new changes from a sibling using <strong>datalad update --merge</strong></dd>
          </dl>
      </section>
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
          <ul>
              <li>Most public datasets separate content in Git versus git-annex behind the scenes</li>
          </ul>
          <img height="900" src="pics/publishing_network_gitvsannex.svg">
    
      </section>
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
          <img height="900" src="pics/publishing_network_publishparts.svg">
      </section>
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
          <img height="900" src="pics/publishing_network_publishparts2.svg">
      </section>
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
          Typical case:
          <ul style="font-size:30px">
              <li class="fragment fade-in">
                  Datasets are exposed via a private or public repository on a
                  repository hosting service
              </li>
              <li class="fragment fade-in">
                  Data can't be stored in the repository hosting service, but can be
                  kept in almost any third party storage
              </li>
              <li class="fragment fade-in">
                  Publication dependencies automate pushing to the correct place, e.g.,
                  <pre>
                    <code class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
    $ git config --local remote.github.datalad-publish-depends gdrive
    # or
    $ datalad siblings add --name origin --url git@git.jugit.fzj.de:adswa/experiment-data.git --publish-depends s3
                </code>
                </pre>
            </li>
          </ul>
          <img src="pics/publishing_network_publishdepends.svg">
      </section>
    
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
                <p style="font-size:30px"> Special case 1: repositories with annex support</p>
          <img height="850" class="fragment fade-in" src="pics/publishing/publishing_network_publishgin.svg">
      </section>
    
      <section data-transition="None">
          <h2>Publishing datasets</h2>
          <p style="font-size:30px">Special case 2: Special remotes with repositories</p>
          <img height="850" src="pics/publishing/publishing_network_publishosf.svg">
      </section>
    </section>




<!-- 

<section>
    <h2>2. DataLad: an overview</h2>
    <img src="pics/comic_box8.svg" alt="">
</section>

<section>
    <h2>2. DataLad: an overview</h2>
    <img src="pics/comic_box9.svg" alt="">
</section>

<section>
    <h2>2. DataLad: an overview</h2>
    <img src="pics/comic_box10.svg" alt="">
</section> -->




</div> <!-- /.slides -->
</div> <!-- /.reveal -->

<script src="reveal.js/dist/reveal.js"></script>
<script src="reveal.js/plugin/notes/notes.js"></script>
<script src="reveal.js/plugin/markdown/markdown.js"></script>
<script src="reveal.js/plugin/highlight/highlight.js"></script>
<script src="custom_functions.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
<script src="reveal.js/plugin/copycode/copycode.js"></script> -->
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,
        height: 960,
        // Factor of the display size that should remain empty around the content
        margin: 0.02,
        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,
        maxScale: 1.0,

        controls: true,
        progress: true,
        history: true,
        center: false,
        slideNumber: 'c',
        pdfSeparateFragments: false,
        pdfMaxPagesPerSlide: 1,
        pdfPageHeightOffset: -1,
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
    });
</script>
</body>
</html>