<!doctype html>
<html lang="en">
<head>
  <title> DataLad @ INCF2023 </title>
  <meta name="description" content=" incf-2023-datalad ">
  <meta name="author" content=" Michał Szczepanik ">

  <meta charset="utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/dist/reset.css">
  <link rel="stylesheet" href="reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="reveal.js/dist/theme/beige.css">
  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="reveal.js/plugin/highlight/monokai.css">
  <link rel="stylesheet" href="custom_styles.css">
</head>
<body>

<div class="reveal">
<div class="slides">

<!-- FRONT PAGE -->
<section>
    <h2 style="margin-bottom: 0;">DataLad intro and background</h2>
    <img src="pics/datalad_git.svg" style="height:300px; margin-bottom: 0; padding-bottom: 0;" alt="title image">
    <div style="margin-top:0.5em;">
        <table style="border: none;">
            <tr>
                <td>Michał Szczepanik<br>
                    <small>
                        <a href="https://masto.ai/@doktorpanik" target="_blank">
                        <img data-src="pics/mastodon.svg" style="height:30px;margin:0px" />
                        @doktorpanik
                        </a>
                    </small>
                    <br>
                    <small>
                        <a href="https://fosstodon.org/@datalad" target="_blank">
                        <img data-src="pics/mastodon.svg" style="height:30px;margin:0px" />
                        @datalad
                        </a>
                    </small>
                    <small>
                        <a href="https://github.com/datalad" target="_blank">
                        <img data-src="pics/GitHub.png" style="height:30px;margin:0px" />
                        datalad
                        </a>
                    </small>
                </td>
                <td style="text-align: center;">
                    <img style="height:80px;margin-right:1px;margin-bottom:5px;margin-top: 1em; vertical-align:middle;" data-src="pics/fzj_logo.svg" /><br>
                </td>
            </tr>
        </table>
    </div>
    <p style="text-align: center;">
        <small><a href="http://psychoinformatics.de" target="_blank">Psychoinformatics lab</a>,
            Institute of Neuroscience and Medicine, Brain &amp; Behavior (INM-7)<br>Research Center Jülich, Germany
            <br>
        </small>
    </p>
    <div>
        <small>Slides:&nbsp;</small>
        <br><a href="https://mslw.github.io/Neuroinformatics2023-slides">mslw.github.io/Neuroinformatics2023-slides</a>
    </div>
</section>

<section>
    <h2>Acknowledgements</h2>
    <table>
    <tr style="vertical-align:middle">
      <td style="vertical-align:middle">
        <dl style="margin-bottom:20px">
          <dt style="margin-top:20px">DataLad software <br>
              &amp; ecosystem</dt>
          <dd style="margin-left:5px!important">
            <ul style="margin-left:5px!important">
                <li>Psychoinformatics Lab, <br>
                Research center Jülich</li>
                <li>Center for Open <br>
                Neuroscience, <br>
                Dartmouth College</li>
                <li>Joey Hess (git-annex)</li>
                <li><em>>100 additional contributors</em></li>
            </ul>
          </dd>
        </dl>
      </td>
      <td style="vertical-align:middle">
    <div style="margin-top:-20px;margin-bottom:-20px;text-align:center"><strong>Funders</strong></div>
    <div style="margin-top:-20px">
    <img style="height:150px;margin-right:0px" data-src="pics/nsf.png" />
    <img style="height:150px;margin-right:0px;margin-left:40px" data-src="pics/binc.png" />
    <img style="height:150px;margin-left:0px" data-src="pics/bmbf_datalad.png" />
    </div>
    <div style="margin-top:-20px">
    <img style="height:80px;margin-top:0px;margin-left:30px" data-src="pics/fzj_logo.svg" />
    <img style="height:60px;margin-left:50px;margin-bottom:25px" data-src="pics/dfg_logo_englisch_blau_en.png" />
    </div>
    <div style="margin-top:-20px">
    <img style="height:100px" data-src="pics/erc_logo.png" />
    <img style="height:60px;margin-bottom:35px" data-src="pics/erdf.png" />
    </div>
    <div style="margin-top:-20px">
    <img style="height:80px;margin-right:20px;margin-bottom:5px" data-src="pics/nrw_mkw_logo.png" />
    <img style="height:60px;margin-right:20px" data-src="pics/cbbs_logo.png" />
    <img style="height:60px" data-src="pics/LSA-Logo.png" />
    </div>
    </td>
    </tr>
    <tr>
    <td colspan=2 width="100%">
    <div style="margin-top:0px">
    <div style="margin-top:20px;margin-bottom:-50px"><strong>Collaborators</strong></div>
    <img style="height:100px;margin:0px;margin-left:100px" data-src="pics/cbrain_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/hbp_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/conp_logo.png" />
    <img style="height:120px;margin:10px" data-src="pics/openneuro_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/ebrain-health-logo.png"/>
    <img style="height:100px;margin:20px" data-src="pics/GIN_logo.png" />
    </div>
    <div style="margin-top:-20px;text-align:center">
    <img style="height:120px;margin:20px" data-src="pics/sfb1451_logo.png" />
    <img style="height:140px;margin:10px" data-src="pics/brainlife_logo.png" />
    <img style="height:100px;margin:20px" data-src="pics/vbc_logo.png" />
    </div>
    </td>
    </tr>
    </table>
</section>

<section>

    <section>
	<h2>What you should know about</h2>

    <ul>
	<li>… command line</li>
	<li>… anaconda</li>
	<li>… pip</li>
    </ul>
    </section>

    <section>
	<h2>Command line</h2>

	<pre><code data-trim class="language-console">
$ cowsay -w "Hello world"
 _____________
< Hello world >
 -------------
        \   ^__^
         \  (OO)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
	</code></pre>

	<a href="https://swcarpentry.github.io/shell-novice/">swcarpentry.github.io/shell-novice/</a>

    </section>

    <section>
	<h2>Jupyter Notebook</h2>
	<img data-src="pics/jupyter_notebook.png" />
    </section>

    <section>
	<h2>Virtual environments and pip</h2>

	<ul>
	    <li><code>venv</code> -- creation of "virtual environments"</li>
	    <li><code>pip</code> -- package installer for Python <small>PIP Installs Packages</small></li>
	</ul>

		<pre><code data-trim class="language-console">
$ python -m venv neuroinformatics2023
$ source neuroinformatics2023/bin/activate
$ pip install datalad
		</code></pre>

    </section>

    <section>
	<h2>Conda</h2>
	<ul>
	    <li>Package management and environment management system</li>
	    <li>Not just Python</li>
	</ul>

	    <pre><code data-trim class="language-console">
$ conda create --name neuroinformatics2023
$ conda activate neuroinformatics2023
$ conda install -c conda-forge datalad
	    </code></pre>

    </section>
</section>

<section>
    <section>
	<h2>Git, git-annex and DataLad</h2>
	<ul>
	    <li class="fragment"><b>Git</b> - the stupid content tracker</li>
	    <li class="fragment">With <b>git-annex</b>, git is instead "a stupid filename and metadata tracker"</li>
	    <li class="fragment"><b>DataLad</b> provides a unified interface and a set of routines</li>
	</ul>

    </section>

    <section>
	<h2>Talk is cheap, show me the code</h2>
	<iframe width="1120" height="630" src="https://www.youtube-nocookie.com/embed/Yrg6DgOcbPE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
	<a href="https://www.youtube.com/watch?v=Yrg6DgOcbPE">youtube.com/watch?v=Yrg6DgOcbPE</a>
    </section>

</section>

<section>
    <h2>What is DataLad?</h2>

    <br>
    <ul>
        <li class="fragment">A free and open source tool</li>
        <li class="fragment">for decentralized (research) data management</li>
        <li class="fragment">with a command line interface, Python API, and graphical user interface</li>
        <li class="fragment">allowing exhaustive tracking of the evolution of digital objects</li>
        <li class="fragment">and computational provenance tracking</li>
        <li class="fragment">to enhance modularity, portability and reproducibility.</li>
    </ul>
    <br>
    <br>
    <div class="fragment">

    <a href="https://datalad.org"><img style="height:300px" data-src="pics/datalad_logo_wide.svg" /></a>
    <br>

    Let's explore this...</div>
    
</section>


<section>
    <section>
      <h2>FAIR is the word</h2>
      <ul style="list-style-type:none">
        <li><h1 style="display:inline">F</h1>indable</li>
        <li><h1 style="display:inline">A</h1>ccessible</li>
        <li><h1 style="display:inline">I</h1>nteroperable</li>
        <li><h1 style="display:inline">R</h1>eusable</li>
      </ul>
      <br>
      <note><small><a href="https://www.go-fair.org/fair-principles">https://www.go-fair.org/fair-principles</a></small></note>
      <note><small>Wilkinson et al. The FAIR Guiding Principles for scientific data management
        and stewardship. Sci Data 3, 160018 (2016). https://doi.org/10.1038/sdata.2016.18</small></note>
      <aside class="notes">
          since 2016 (five years), no way around it, declared "done"
      </aside>
    </section>
    
    <section>
      <h2>But the "I" in FAIR is not you</h2>
      <ul style="list-style-type:none">
        <li><h1 style="display:inline">F?</h1> I already have it, it's right here!</li>
        <li><h1 style="display:inline">A?</h1> I am working with it already, I made it!</li>
        <li><h1 style="display:inline">I?</h1> With what?</li>
        <li><h1 style="display:inline">R?</h1> First let me finish this PhD and then we talk, OK?</li>
      </ul>
      <aside class="notes">
          individual/limited perspective less clear, tendency to delay and make expensive
      </aside>
    
      <p style="margin-top:50px"><strong>Still, someone has to put in the work or nothing will ever be FAIR.</strong></p>
    </section>
    
    <section data-markdown><script type="text/template">
    ## VAMP it up!
    ![](pics/Vamp-The_Rich_Dont_Rock.jpg)<!-- .element: height="800px" -->

    <small><imgcredit>Divebomb Records</imgcredit></small>
    
    Note:
    My proposal: Let's think about VAMP instead
    </script></section>
    
    <section>
      <h2>Be FAIR and immediately benefit from it <em>yourself</em>...</h2>
      <ul style="list-style-type:none">
        <li><h1 style="display:inline">V</h1>ersion-controlled</li>
        <li><h1 style="display:inline">A</h1>ctionable metadata</li>
        <li><h1 style="display:inline">M</h1>odular</li>
        <li><h1 style="display:inline">P</h1>ortable</li>
      </ul>
      <aside class="notes">
          not the band, but...
      </aside>
    </section>

    <section data-markdown><script type="text/template">
    ## ...while still working towards <em>the greater good</em> of FAIR data
        
        - Bench/bed/field-side researchers are an essential source of<br> *valid* metadata, critical for FAIR data
        
        - Their **resources are limited**, and they need something in exchange
        
        - Focus on **enabling practical collaboration**<br> (even if just with one's future self)<br>
      
    ### Make the aspirational goal "FAIR data" <br>a by-product of enabling efficient research
        
    </script></section>
    
    <section data-markdown><script type="text/template">
    ![](pics/datalad_logo_wide.svg)<!-- .element: height="600" -->
    https://datalad.org<!-- .element: style="margin-left:800px" -->
    <br><br><br>
    ### So what does the DataLad approach involve?
    </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Exhaustive tracking of research components
    ![](pics/vamp_0_start.png)<!-- .element: width="100%" -->
    Well-structured datasets (using community standards), and portable computational environments &mdash; and their evolution &mdash; are the precondition for reproducibility
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # turn any directory into a dataset`
    # with version control
    
    % datalad create &lt;directory&gt;
    </pre></code>
    </td><td style="padding:0px">
    <code><pre>
    # save a new state of a dataset with
    # file content of any size
    
    % datalad save
    </pre></code>
    </td></tr></table>
    Note:
    - link to prev. statements on description standards
    - your community could be really small (your lab), when data are precious resources
    will be spent to understand it, but information must be capture to make this possible
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## What is a DataLad dataset?

    - a regular, but *managed* directory on computer file system
      <small>think: provides the familiar look and feel of files and folders</small>
    
    - **metadata** on the evolution of a collection of files:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> content identity <em>(think: checksums)</em><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> content availability <em>(think: URLs)</em><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> provenance of change <em>(think: who did what when?)</em>
    
    - a **Git** repository <br>
      <small>think: compatible with anything that can handle Git repositories</small>
    
    - employs **git-annex** for file content tracking and transport
      <small>think: supports any storage service and transport protocol supported by git-annex</small>
    
    - extends both Git and git-annex with additional features and infrastructure support <br>
      <small>think: deposit and retrieve from non-Git-aware sites, work with dataset hierarchies</small>
    </script></section>

</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Capture computational provenance
    ![](pics/vamp_1_provcapture.png)<!-- .element: width="100%" -->
    Which data was needed at which version, as input into which code, running with what parameterization in which
    computional environment, to generate an outcome?
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # execute any command and capture its output
    # while recording all input versions too
    
    % datalad run --input ... --output ... &lt;command&gt;
    </pre></code>
    </td></tr></table>
    
    Note:
    The missing link: even when everything is shared, we still don't know how to start.
    README is minimum, but executable prov-records are much better.
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## Data descriptor &larr; actionable provenance
    ![](pics/w3cprov.png)<!-- .element: width="80%" -->
    
    <note>https://www.w3.org/TR/prov-overview</note>
    Note:
    - description standard often miss out on provenance
    - Mostly about "what is it?"
    - We also need "how it came to be?" (faiR actually demands it)
    - shown: W3C-PROV, but we are not there yet
    
    take a step back, look at what provenance requires and provides
    </script></section>
    
    <section data-markdown><script type="text/template">
    ![](pics/fairlybig_paper.png)<!-- .element: width="100%" -->
    https://www.nature.com/articles/s41597-022-01163-2
    </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Exhaustive capture enables portability
    ![](pics/vamp_2_pushtocloud.png)<!-- .element: width="100%" -->
    Precise identification of data and computational environments, combined with provenance records form a comprehensive and portable data structure, capturing all aspects of an investigation.
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # transfer data and metadata to other sites and services
    # with fine-grained access control for dataset components
    
    % datalad push --to &lt;site-or-service&gt;
    </pre></code>
    </td></tr></table>
    
    Note:
    Does it fly? Can you give it to someone? Or can you take it with you to your new lab?
    </script></section>
    
    <section data-markdown data-transition="fade"><script type="text/template">
    ## (Meta)data deposition (on Dataverses)
    ![](pics/dataverse_demo_deposit.png)<!-- .element: width="70%" style="margin-top:-30px;margin-bottom:-20px;z-index: -1"-->
    
    - Register any dataset at any Dataverse site (e.g., DataverseNL), receive citable DOI
    - No requirement to re-host data (avoids duplication of storage cost)
    - Data owner remains in full control over data access
    - https://github.com/datalad/datalad-dataverse
    </script></section>
    
    
    <section data-transition="fade">
    <h2>EUDAT B2DROP: data deposition and retrieval</h2>
    <video controls data-autoplay src="pics/webdav_roundtrip.mp4"></video>
    Similar support for Surfdrive, Dataverse, Open Science Framework, S3, ...
    </section>

    <section data-markdown><script type="text/template">
        ## Remote analysis of clinical data
        ![](pics/datalad_hospital.png)
        </script></section>
</section>
    
    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    #### The DataLad approach...
    ## Reproducibility strengthens trust
    ![](pics/vamp_3_reproduce.png)<!-- .element: width="100%" -->
    Outcomes of computational transformations can be validated by authorized 3rd-parties. This enables audits, promotes accountability, and streamlines automated "upgrades" of outputs
    
    <table width=100% style="padding:0px">
    <tr><td style="padding:0px">
    <code><pre>
    # obtain dataset (initially only identity,
    # availability, and provenance metadata)
    
    % datalad clone &lt;url&gt;
    </pre></code>
    </td><td style="padding:0px">
    <code><pre>
    # immediately actionable provenance records
    # full abstraction of input data retrieval
    
    % datalad rerun &lt;commit|tag|range&gt;
    </pre></code>
    </td></tr></table>
    Note:
    Goal is automated reproducibility, enables assessment of robustness and benchmarking algorithmic developments
    </script></section>
    
    <section data-markdown><script type="text/template">
    ## When everything is tracked: A reproducible paper
    
    <iframe width="1120" height="630" src="https://www.youtube-nocookie.com/embed/nhLqmF58SLQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    - Peer-reviewed paper published in Behavior Research Methods [[DOI 10.3758/s13428-020-01428-x](https://doi.org/10.3758/s13428-020-01428-x)]<!-- .element: style="font-size:70%" -->
    
    - Free to reproduce at https://github.com/psychoinformatics-de/paper-remodnav more details in the DataLad handbook
      http://handbook.datalad.org/r.html?reproducible-paper.
    
    - Full video: https://youtube.com/datalad
    
    <!-- .element: style="font-size:70%" -->
    Note:
    - VERY useful prior publication
    </script></section>

    <section data-markdown><script type="text/template">
        ### Ultimate goal: (re-)usability
        ![](pics/vamp_4_reuse.png)<!-- .element: width="100%" -->
        Verifiable, portable, self-contained data structures that track all aspects of an investigation exhaustively can be (re-)used as modular components in larger contexts &mdash; propagating their traits
        
        <table width=100% style="padding:0px">
        <tr><td style="padding:0px">
        <code><pre>
        # declare a dependency on another dataset and
        # re-use it a particular state in a new context
        
        % datalad clone -d &lt;superdataset&gt; &lt;url&gt; &lt;path-in-dataset&gt;
        </pre></code>
        </td></tr></table>
        
        Note:
        With these in place, re-usability is a small(er) step
        </script></section>
</section>
    

    
<section>
    <section data-markdown data-transition="none"><script type="text/template">
    ## Why is DataLad a terminal app?
    ![](videos/typing_monkey.gif)<!-- .element: width="49%" style="margin-bottom:170px" -->
    ![](videos/mouse_pointers.webp)<!-- .element: width="49%" -->
    
    No reproducibility without precise instructions
    </script></section>
    
    
    <section
        data-background-video="videos/gooey_historytab.mp4"
        data-background-video-loop
        data-background-size="contain">
    <p style="padding-top:800px;text-shadow: 2px 2px 2px white;">
    DataLad Gooey: Convenience for exploration and management
    </p>
    </section>
    
    <section
        data-background-video="videos/gooey_run_in_terminal.mp4"
        data-background-video-loop
        data-background-size="contain">
    <p style="padding-top:800px;text-shadow: 2px 2px 2px white;">
    Companion (not competition) for the terminal
    </p>
    </section>
    
    <section
        data-background-video="videos/gooey_add_metadata.mp4"
        data-background-video-loop
        data-background-size="contain">
    <p style="padding-top:800px;text-shadow: 2px 2px 2px white;">
    Metadata entry convenience
    </p>
    </section>
</section>
    
<section data-markdown><script type="text/template">
    ## Not feature-complete for you? Extend!
    
    https://github.com/datalad/datalad-extension-template
    
    <small>
    
    | `datalad-` | |
    | --- | --- |
    | `catalog` | Render a web-accessible catalog from DataLad dataset metadata |
    | `container` | working with containerized environments |
    | `crawler` | crawl web resources into an automated data distribution |
    | `dataverse` | deposit at and retrieve datasets from Dataverse sites |
    | `debian` | track Debian software package build and deployment reproducibly |
    | `ebrains` | retrieve any EBRAINs hosted dataset as a DataLad dataset |
    | `fuse` | mount DataLad datasets as a FUSE file system |
    | `gooey` | extensible DataLad GUI |
    | `metalad` | (semantic) metadata transport and reporting |
    | `neuroimaging` | workflow and data format support for neuro/medical imaging |
    | `next` | staging areas for new features |
    | `osf` | deposit at and retrieve datasets from the Open Science Framework (OSF) |
    | `ukbiobank` | Version-controlled access to the UKB dataset |
    | `xnat` | retrieve MRI data from XNAT databases as DataLad datasets |
    | ... | various 3rd-party extensions are also available (e.g., `getexec`, `lgpdextension`) |
    
    </small>
    </script>

</section>

<section>
    <h2>DataLad contact and more information</h2>
    <table>
        <tr><td>Website + Demos</td><td><a href="https://datalad.org">datalad.org</a></td></tr>
        <tr><td>Documentation</td><td><a href="https://handbook.datalad.org">handbook.datalad.org</a></td></tr>
        <tr><td>Talks and tutorials</td><td><a href="https://youtube.com/datalad">youtube.com/datalad</a></td></tr>
        <tr><td>Development</td><td><a href="https://github.com/datalad">github.com/datalad</a></td></tr>
        <tr><td>Support</td><td><a href="https://matrix.to/#/#datalad:matrix.org">#datalad:matrix.org</a></td></tr>
        <tr><td>Open data</td><td><a href="https://datasets.datalad.org">datasets.datalad.org</a></td></tr>
        <tr><td>Mastodon</td><td><a href="https://fosstodon.org/@datalad">@datalad@fosstodon.org</a></td></tr>
        <tr><td>Meeting (Apr 2024)</td><td><a href="https://distribits.live/">distribits.live</a></td></tr>
    </table>
    <br>
    
</section>


</div> <!-- /.slides -->
</div> <!-- /.reveal -->

<script src="reveal.js/dist/reveal.js"></script>
<script src="reveal.js/plugin/notes/notes.js"></script>
<script src="reveal.js/plugin/markdown/markdown.js"></script>
<script src="reveal.js/plugin/highlight/highlight.js"></script>
<script src="custom_functions.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
<script src="reveal.js/plugin/copycode/copycode.js"></script> -->
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,
        height: 960,
        // Factor of the display size that should remain empty around the content
        margin: 0.02,
        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,
        maxScale: 1.0,

        controls: true,
        progress: true,
        history: true,
        center: false,
        slideNumber: 'c',
        pdfSeparateFragments: false,
        pdfMaxPagesPerSlide: 1,
        pdfPageHeightOffset: -1,
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
    });
</script>
</body>
</html>
